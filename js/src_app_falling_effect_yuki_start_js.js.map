{"version":3,"file":"src_app_falling_effect_yuki_start_js.js","mappings":"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","sources":["webpack://sakurairo-scripts/./src/app/falling_effect/yuki/start.js","webpack://sakurairo-scripts/./src/app/falling_effect/yuki/yuki.js"],"sourcesContent":["import { snowFall } from './yuki'\nconst amount = mashiro_option.effect.amount\n\n/* 调用及控制方法 */\nvar snow = new snowFall({ maxFlake: amount == 'half' ? 250 : 500 });\nsnow.start();","/* 控制下雪 */\nexport function snowFall(snow) {\n    /* 可配置属性 */\n    snow = snow || {};\n    this.maxFlake = snow.maxFlake || 200;   /* 最多片数 */\n    this.flakeSize = snow.flakeSize || 10;  /* 雪花形状 */\n    this.fallSpeed = snow.fallSpeed || 1;   /* 坠落速度 */\n}\n/* 兼容写法 */\nrequestAnimationFrame = window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    function (callback) { setTimeout(callback, 1000 / 60); };\n\ncancelAnimationFrame = window.cancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.msCancelAnimationFrame ||\n    window.oCancelAnimationFrame;\n/* 开始下雪 */\nsnowFall.prototype.start = function () {\n    /* 创建画布 */\n    snowCanvas.apply(this);\n    /* 创建雪花形状 */\n    createFlakes.apply(this);\n    /* 画雪 */\n    drawSnow.apply(this)\n}\n/* 创建画布 */\nfunction snowCanvas() {\n    /* 添加Dom结点 */\n    var snowcanvas = document.createElement(\"canvas\");\n    snowcanvas.id = \"snowfall\";\n    snowcanvas.width = window.innerWidth;\n    snowcanvas.height = document.body.clientHeight;\n    snowcanvas.setAttribute(\"style\", \"position:absolute; top: 0; left: 0; z-index: 1; pointer-events: none;\");\n    document.getElementsByTagName(\"body\")[0].appendChild(snowcanvas);\n    this.canvas = snowcanvas;\n    this.ctx = snowcanvas.getContext(\"2d\");\n    /* 窗口大小改变的处理 */\n    window.onresize = function () {\n        snowcanvas.width = window.innerWidth;\n        /* snowcanvas.height = window.innerHeight */\n    }\n}\n/* 雪运动对象 */\nfunction flakeMove(canvasWidth, canvasHeight, flakeSize, fallSpeed) {\n    this.x = Math.floor(Math.random() * canvasWidth);   /* x坐标 */\n    this.y = Math.floor(Math.random() * canvasHeight);  /* y坐标 */\n    this.size = Math.random() * flakeSize + 2;          /* 形状 */\n    this.maxSize = flakeSize;                           /* 最大形状 */\n    this.speed = Math.random() * 1 + fallSpeed;         /* 坠落速度 */\n    this.fallSpeed = fallSpeed;                         /* 坠落速度 */\n    this.velY = this.speed;                             /* Y方向速度 */\n    this.velX = 0;                                      /* X方向速度 */\n    this.stepSize = Math.random() / 30;                 /* 步长 */\n    this.step = 0                                       /* 步数 */\n}\nflakeMove.prototype.update = function () {\n    var x = this.x,\n        y = this.y;\n    /* 左右摆动(余弦) */\n    this.velX *= 0.98;\n    if (this.velY <= this.speed) {\n        this.velY = this.speed\n    }\n    this.velX += Math.cos(this.step += .05) * this.stepSize;\n\n    this.y += this.velY;\n    this.x += this.velX;\n    /* 飞出边界的处理 */\n    if (this.x >= canvas.width || this.x <= 0 || this.y >= canvas.height || this.y <= 0) {\n        this.reset(canvas.width, canvas.height)\n    }\n};\n/* 飞出边界-放置最顶端继续坠落 */\nflakeMove.prototype.reset = function (width, height) {\n    this.x = Math.floor(Math.random() * width);\n    this.y = 0;\n    this.size = Math.random() * this.maxSize + 2;\n    this.speed = Math.random() * 1 + this.fallSpeed;\n    this.velY = this.speed;\n    this.velX = 0;\n};\n// 渲染雪花-随机形状（此处可修改雪花颜色！！！）\nflakeMove.prototype.render = function (ctx) {\n    var snowFlake = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size);\n    snowFlake.addColorStop(0, \"rgba(255, 255, 255, 0.9)\");  /* 此处是雪花颜色，默认是白色 */\n    snowFlake.addColorStop(.5, \"rgba(255, 255, 255, 0.5)\"); /* 若要改为其他颜色，请自行查 */\n    snowFlake.addColorStop(1, \"rgba(255, 255, 255, 0)\");    /* 找16进制的RGB 颜色代码。 */\n    ctx.save();\n    ctx.fillStyle = snowFlake;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.restore();\n};\n/* 创建雪花-定义形状 */\nfunction createFlakes() {\n    var maxFlake = this.maxFlake,\n        flakes = this.flakes = [],\n        canvas = this.canvas;\n    for (var i = 0; i < maxFlake; i++) {\n        flakes.push(new flakeMove(canvas.width, canvas.height, this.flakeSize, this.fallSpeed))\n    }\n}\n/* 画雪 */\nfunction drawSnow() {\n    var maxFlake = this.maxFlake,\n        flakes = this.flakes;\n    ctx = this.ctx, canvas = this.canvas, that = this;\n    /* 清空雪花 */\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    for (var e = 0; e < maxFlake; e++) {\n        flakes[e].update();\n        flakes[e].render(ctx);\n    }\n    /*  一帧一帧的画 */\n    this.loop = requestAnimationFrame(function () {\n        drawSnow.apply(that);\n    });\n}\n/* 调用及控制方法 */\n/* var snow = new snowFall({ maxFlake: 500 });\nsnow.start(); */"],"names":["snowFall","amount","mashiro_option","effect","snow","maxFlake","start","flakeSize","fallSpeed","requestAnimationFrame","window","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","msCancelAnimationFrame","oCancelAnimationFrame","prototype","snowCanvas","apply","createFlakes","drawSnow","snowcanvas","document","createElement","id","width","innerWidth","height","body","clientHeight","setAttribute","getElementsByTagName","appendChild","canvas","ctx","getContext","onresize","flakeMove","canvasWidth","canvasHeight","x","Math","floor","random","y","size","maxSize","speed","velY","velX","stepSize","step","update","cos","reset","render","snowFlake","createRadialGradient","addColorStop","save","fillStyle","beginPath","arc","PI","fill","restore","flakes","i","push","that","clearRect","e","loop"],"sourceRoot":""}